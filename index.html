<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proposition de prestation</title>
  <style>
    /* Reset et anti-d√©bordement */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    html, body {
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: #f0f8ff;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow-x: hidden; /* emp√™che le d√©bordement horizontal */
    }

    /* Container principal */
    .container {
      width: 90%;          /* prend 90% de l‚Äô√©cran sur mobile */
      max-width: 600px;    /* limite sur PC */
      background-color: #fff;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      border: 2px solid #000;
      position: relative;
    }

    .logo {
      width: 120px;
      margin-bottom: 20px;
    }

    h2 {
      margin-bottom: 20px;
      color: #000;
    }

    button {
      margin: 10px;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #007BFF;
      color: #fff;
      font-size: 14px;
      transition: 0.3s;
    }
    button:hover {
      background-color: #0056b3;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    /* Champs de formulaire */
    input, textarea, select {
      width: 80%;
      max-width: 400px;
      padding: 10px;
      margin: 10px auto;
      display: block;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    /* Navigation */
    .backBtn {
      background-color: #6c757d;
    }
    .backBtn:hover {
      background-color: #545b62;
    }

    /* Boutons th√®me */
    .theme-toggle {
      position: absolute;
      top: -50px;
      right: 0;
      display: flex;
      gap: 8px;
      background: #fff;
      border: 2px solid #000;
      border-radius: 10px;
      padding: 5px;
    }
    .theme-toggle button {
      background: none;
      color: #000;
      font-size: 18px;
      padding: 5px 8px;
    }
    .theme-toggle button.active {
      background: #007BFF;
      color: #fff;
      border-radius: 5px;
    }

    /* Mode sombre */
    body.dark {
      background-color: #000;
      color: #fff;
    }
    body.dark .container {
      background-color: #111;
      border: 2px solid #fff;
    }
    body.dark h2 {
      color: #fff;
    }
    body.dark .theme-toggle {
      background: #000;
      border: 2px solid #fff;
    }
    body.dark .theme-toggle button {
      color: #fff;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Boutons th√®me -->
    <div class="theme-toggle">
      <button id="lightBtn" class="active">‚òÄÔ∏è</button>
      <button id="darkBtn">üåô</button>
    </div>

    <!-- Logo -->
    <img src="ash-tech_logo.jpg" alt="Logo" class="logo">

    <!-- Contenu dynamique -->
    <div id="content">
      <h2>Proposition de prestation en attente de validation.</h2>
      <button id="acceptBtn">‚úÖ J'accepte la prestation</button>
      <button id="refuseBtn">‚ùå Je refuse la prestation</button>
    </div>
  </div>

  <script>
    const content = document.getElementById('content');
    const lightBtn = document.getElementById('lightBtn');
    const darkBtn = document.getElementById('darkBtn');
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

    // --- Th√®me ---
    lightBtn.addEventListener('click', () => {
      document.body.classList.remove('dark');
      lightBtn.classList.add('active');
      darkBtn.classList.remove('active');
    });
    darkBtn.addEventListener('click', () => {
      document.body.classList.add('dark');
      darkBtn.classList.add('active');
      lightBtn.classList.remove('active');
    });

    // --- Accepter ---
    document.getElementById('acceptBtn').addEventListener('click', () => {
      content.innerHTML = `
        <h2>Merci pour votre confiance üôè</h2>
        <p>Veuillez remplir ce formulaire :</p>
        <input type="text" id="firstName" placeholder="Pr√©nom *" required>
        <input type="text" id="lastName" placeholder="Nom *" required>
        <input type="tel" id="phone" placeholder="T√©l√©phone">
        <input type="email" id="email" placeholder="Email *" required>
        ${isMobile ? `
          <label>Envoyer par :</label>
          <select id="sendOption">
            <option value="whatsapp" selected>WhatsApp</option>
            <option value="mail">Email</option>
          </select>
        ` : ``}
        <button id="sendAcceptBtn">üì© Envoyer la r√©ponse</button>
        <button class="backBtn" id="backToMain">‚¨ÖÔ∏è Retour</button>
      `;
      attachBackToMain();
      attachAcceptSend();
    });

    // --- Refuser ---
    document.getElementById('refuseBtn').addEventListener('click', () => {
      content.innerHTML = `
        <h2>Souhaitez-vous arr√™ter d√©finitivement la collaboration ?</h2>
        <button id="stopBtn">üõë Arr√™t d√©finitif</button>
        <button id="issueBtn">‚ö†Ô∏è Il y a un souci</button>
        <button class="backBtn" id="backToMain">‚¨ÖÔ∏è Retour</button>
      `;
      attachBackToMain();
      document.getElementById('stopBtn').addEventListener('click', () => {
        content.innerHTML = `
          <h2>Merci pour votre retour üôè</h2>
          <p>Nous esp√©rons vous revoir bient√¥t.</p>
          <button class="backBtn" id="backToMain">‚¨ÖÔ∏è Retour</button>
        `;
        attachBackToMain();
      });
      document.getElementById('issueBtn').addEventListener('click', () => {
        content.innerHTML = `
          <h2>Expliquez le souci :</h2>
          <textarea id="issueText" placeholder="Votre message..."></textarea>
          <button id="sendIssueBtn">üì© Envoyer</button>
          <button class="backBtn" id="backToMain">‚¨ÖÔ∏è Retour</button>
        `;
        attachBackToMain();
        attachIssueSend();
      });
    });

    // --- Retour ---
    function attachBackToMain() {
      const backBtn = document.getElementById('backToMain');
      if(backBtn) backBtn.addEventListener('click', () => {
        content.innerHTML = `
          <h2>Proposition de prestation en attente de validation.</h2>
          <button id="acceptBtn">‚úÖ J'accepte la prestation</button>
          <button id="refuseBtn">‚ùå Je refuse la prestation</button>
        `;
        document.getElementById('acceptBtn').addEventListener('click', () => {
          content.innerHTML = `
            <h2>Merci pour votre confiance üôè</h2>
            <p>Veuillez remplir ce formulaire :</p>
            <input type="text" id="firstName" placeholder="Pr√©nom *" required>
            <input type="text" id="lastName" placeholder="Nom *" required>
            <input type="tel" id="phone" placeholder="T√©l√©phone">
            <input type="email" id="email" placeholder="Email *" required>
            ${isMobile ? `
              <label>Envoyer par :</label>
              <select id="sendOption">
                <option value="whatsapp" selected>WhatsApp</option>
                <option value="mail">Email</option>
              </select>
            ` : ``}
            <button id="sendAcceptBtn">üì© Envoyer la r√©ponse</button>
            <button class="backBtn" id="backToMain">‚¨ÖÔ∏è Retour</button>
          `;
          attachBackToMain();
          attachAcceptSend();
        });
        document.getElementById('refuseBtn').addEventListener('click', () => {
          content.innerHTML = `
            <h2>Souhaitez-vous arr√™ter d√©finitivement la collaboration ?</h2>
            <button id="stopBtn">üõë Arr√™t d√©finitif</button>
            <button id="issueBtn">‚ö†Ô∏è Il y a un souci</button>
            <button class="backBtn" id="backToMain">‚¨ÖÔ∏è Retour</button>
          `;
          attachBackToMain();
          document.getElementById('stopBtn').addEventListener('click', () => {
            content.innerHTML = `
              <h2>Merci pour votre retour üôè</h2>
              <p>Nous esp√©rons vous revoir bient√¥t.</p>
              <button class="backBtn" id="backToMain">‚¨ÖÔ∏è Retour</button>
            `;
            attachBackToMain();
          });
          document.getElementById('issueBtn').addEventListener('click', () => {
            content.innerHTML = `
              <h2>Expliquez le souci :</h2>
              <textarea id="issueText" placeholder="Votre message..."></textarea>
              <button id="sendIssueBtn">üì© Envoyer</button>
              <button class="backBtn" id="backToMain">‚¨ÖÔ∏è Retour</button>
            `;
            attachBackToMain();
            attachIssueSend();
          });
        });
      });
    }

    // --- Envoi acceptation ---
    function attachAcceptSend() {
      const sendBtn = document.getElementById('sendAcceptBtn');
      if(sendBtn) sendBtn.addEventListener('click', () => {
        const firstName = document.getElementById('firstName').value.trim();
        const lastName = document.getElementById('lastName').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const email = document.getElementById('email').value.trim();
        if(!firstName || !lastName || !email) {
          alert("Veuillez remplir tous les champs requis (Pr√©nom, Nom, Email).");
          return;
        }
        const bodyMessage = encodeURIComponent(
          `Bonjour,\n\nJe confirme que j'accepte votre proposition de prestation.\n\nNom: ${lastName}\nPr√©nom: ${firstName}\nT√©l√©phone: ${phone}\nEmail: ${email}`
        );
        if (isMobile) {
          const sendOption = document.getElementById('sendOption').value;
          if (sendOption === 'whatsapp') {
            window.open(`https://wa.me/22896933995?text=${bodyMessage}`);
          } else {
            window.open(`mailto:martindetours98@gmail.com?subject=Acceptation%20Prestation&body=${bodyMessage}`);
          }
        } else {
          window.open(`mailto:martindetours98@gmail.com?subject=Acceptation%20Prestation&body=${bodyMessage}`);
        }
        alert('Votre r√©ponse est pr√™te pour envoi !');
      });
    }

    // --- Envoi souci ---
    function attachIssueSend() {
      const sendBtn = document.getElementById('sendIssueBtn');
      if(sendBtn) sendBtn.addEventListener('click', () => {
        const issueText = document.getElementById('issueText').value.trim();
        if(!issueText) {
          alert("Veuillez expliquer votre souci avant d'envoyer.");
          return;
        }
        const bodyMessage = encodeURIComponent(
          `Bonjour,\n\nJe rencontre un souci concernant la prestation :\n\n${issueText}`
        );
        if (isMobile) {
          window.open(`https://wa.me/22896933995?text=${bodyMessage}`);
        } else {
          window.open(`mailto:martindetours98@gmail.com?subject=Souci%20Prestation&body=${bodyMessage}`);
        }
        alert('Votre message est pr√™t pour envoi !');
      });
    }
  </script>
</body>
</html>

